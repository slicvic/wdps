!function(s,t,n,h){new t({el:".js-app",data:{searching:!1,showResults:!1,validationErrors:[],shareUrl:"",minPhrases:s.minPhrases,maxPhrases:s.maxPhrases,examples:s.examples,placeholders:["Enter a phrase","Enter another phrase"],phrases:new Array(s.minPhrases).fill(""),chartLegendColors:["#ff6f6c","#999ba7"],chartColors:["#ff6f6c","#ebebee"],chart:null,results:{}},computed:{showAddPhraseBtn:function(){return this.phrases.length<this.maxPhrases},showRemovePhraseBtn:function(){return this.phrases.length>this.minPhrases}},created:function(){for(var e in s.phrases)this.phrases[e]=s.phrases[e]},mounted:function(){n(this.$el).removeClass("d-none"),n(this.$refs.shareUrlInput).focus(function(){n(this).select()}),n(this.$el).on("keypress",".js-phrase-input",function(e){13===e.which&&this.search()}.bind(this)),s.phrases.length&&this.search()},methods:{addPhrase:function(){this.phrases.length<this.maxPhrases&&this.phrases.push("")},removePhrase:function(e){this.phrases.splice(e,1)},tryAgain:function(){this.showResults=!1},copyShareUrl:function(){var e=this.$refs.shareUrlInput;if(e.contentEditable=!0,navigator.userAgent.match(/ipad|iphone/i)){var s=document.createRange();s.selectNodeContents(e);var t=window.getSelection();t.removeAllRanges(),t.addRange(s),e.setSelectionRange(0,999999)}else e.select();document.execCommand("copy"),e.contentEditable=!1,e.readOnly=!0},handlePhraseInputKeyup:function(e){this.validatePhraseInput(e)},validatePhrase:function(e){return"string"==typeof e&&e.length?e.trim().split(" ").length<2?"Phrase must be 2 or more words!":"":"Phrase cannot be blank!"},validatePhraseInput:function(e){var s=this.validatePhrase(this.phrases[e]);return t.set(this.validationErrors,e,s),!s},validateForm:function(){var e=!1;for(var s in this.phrases)this.validatePhraseInput(s)||(e=!0);return!e},search:function(){if(this.validateForm()){this.showResults=!1,this.searching=!0;var s=[];this.phrases.forEach(function(e){s.push("q[]="+e)});var r=this;n.getJSON("/api/search.php",s.join("&")).always(function(e){if("object"!=typeof e||"object"!=typeof e.results)return r.results=!1,r.searching=!1,void(r.showResults=!0);r.results=e.results,r.shareUrl=e.share_url;var s=[],t=[];r.results.forEach(function(e){t.push(e.phrase),s.push(e.percent)});var a=n(r.$refs.chartCanvas)[0];a.getContext("2d").clearRect(0,0,a.width,a.height),r.chart&&r.chart.destroy(),r.searching=!1,r.showResults=!0,window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(function(){r.chart=new h(a,{type:"pie",options:{legend:{display:!1}},data:{labels:t,datasets:[{data:s,backgroundColor:r.chartColors}]}})},100)})}}}})}(window.appConfig,window.Vue,window.jQuery,window.Chart);