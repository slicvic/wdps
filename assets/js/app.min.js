!function(e,t,h,n){new t({el:".js-app",data:{searching:!1,showResults:!1,validationErrors:[],shareUrl:"",minPhrases:e.minPhrases,maxPhrases:e.maxPhrases,examples:e.examples,placeholders:["Enter a phrase","Enter another phrase"],phrases:new Array(e.minPhrases).fill(""),chartColors:["#5d5d5a","#ffcdab"],chart:null,results:{}},computed:{showAddPhraseBtn:function(){return this.phrases.length<this.maxPhrases},showRemovePhraseBtn:function(){return this.phrases.length>this.minPhrases}},created:function(){for(var s in e.phrases)this.phrases[s]=e.phrases[s]},mounted:function(){h(this.$el).removeClass("d-none"),h(this.$refs.shareUrlInput).focus(function(){h(this).select()}),h(this.$el).on("keypress",".js-phrase-input",function(s){13===s.which&&this.search()}.bind(this)),e.phrases.length&&this.search()},methods:{addPhrase:function(){this.phrases.length<this.maxPhrases&&this.phrases.push("")},removePhrase:function(s){this.phrases.splice(s,1)},tryAgain:function(){this.showResults=!1},copyShareUrl:function(){h(this.$refs.shareUrlInput).select(),document.execCommand("copy")},handlePhraseInputKeyup:function(s){this.validatePhraseInput(s)},validatePhrase:function(s){return"string"==typeof s&&s.length?s.split(" ").length<2?"Phrase must be 2 or more words!":"":"Phrase cannot be blank!"},validatePhraseInput:function(s){var e=this.validatePhrase(this.phrases[s]);return t.set(this.validationErrors,s,e),!e},validateForm:function(){var s=!1;for(var e in this.phrases)this.validatePhraseInput(e)||(s=!0);return!s},search:function(){if(this.validateForm()){this.showResults=!1,this.searching=!0;var e=[];this.phrases.forEach(function(s){e.push("q[]="+s)});var a=this;h.getJSON("/api/search.php",e.join("&")).always(function(s){if("object"!=typeof s||"object"!=typeof s.results)return a.results=!1,a.searching=!1,void(a.showResults=!0);a.results=s.results,a.shareUrl=s.share_url;var e=[],t=[];a.results.forEach(function(s){t.push(s.phrase),e.push(s.percent)});var r=h(a.$refs.chartCanvas)[0];r.getContext("2d").clearRect(0,0,r.width,r.height),a.chart&&a.chart.destroy(),a.searching=!1,a.showResults=!0,setTimeout(function(){a.chart=new n(r,{type:"pie",options:{legend:{display:!1}},data:{labels:t,datasets:[{data:e,backgroundColor:a.chartColors}]}})},100)})}}}})}(window.appConfig,window.Vue,window.jQuery,window.Chart);