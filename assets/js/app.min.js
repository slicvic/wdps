!function(h,a,n,s){new h({el:".js-app",data:{searching:!1,showResults:!1,validationErrors:[],maxPhrases:3,minPhrases:2,phrases:["",""],examples:["Jordan GOAT","LeBron GOAT","Kobe GOAT"],chart:null,chartColors:["#5d5d5a","#ffcdab","#d2c8c8"],results:{}},computed:{showAddPhraseBtn:function(){return this.phrases.length<this.maxPhrases},showRemovePhraseBtn:function(){return this.phrases.length>this.minPhrases},shareUrl:function(){return"whatdopeoplesay.com?phrases="+encodeURIComponent(this.phrases.join(","))}},mounted:function(){var e=this;a(this.$el).removeClass("d-none"),a(this.$refs.shareUrlInput).focus(function(){a(this).select()}),a(this.$el).on("keypress",".js-phrase-input",function(s){13===s.which&&e.search()}),2<=s.length&&s.length<=3&&(this.phrases=s,this.search())},methods:{addPhrase:function(){this.phrases.length<this.maxPhrases&&this.phrases.push("")},removePhrase:function(s){this.phrases.splice(s,1)},hideResults:function(){this.showResults=!1},copyShareUrl:function(){a(this.$refs.shareUrlInput).select(),document.execCommand("copy")},handlePhraseInputKeyup:function(s){this.validatePhrases(s)},validatePhrases:function(s){for(var e=!0,t=0;t<this.phrases.length;t++)if(void 0===s||s==t){var r=this.phrases[t].trim().replace(/\s\s+/g," ");""==r?(e=!1,h.set(this.validationErrors,t,"Phrase cannot be blank!")):r.split(" ").length<2?(e=!1,h.set(this.validationErrors,t,"Phrase must be 2 or more words!")):h.set(this.validationErrors,t,"")}return e},search:function(){if(this.validatePhrases()){this.showResults=!1,this.searching=!0;var h=this,e=[];this.phrases.forEach(function(s){e.push("q[]="+s)}),a.getJSON("/api/search.php",e.join("&")).done(function(s){if("object"!=typeof s.results)return h.results=!1,h.searching=!1,void(h.showResults=!0);h.results=s.results;var e=[],t=[];h.results.forEach(function(s){t.push(s.phrase),e.push(s.percent)});var r=a(h.$refs.chartCanvas)[0];r.getContext("2d").clearRect(0,0,r.width,r.height),h.chart&&h.chart.destroy(),h.searching=!1,h.showResults=!0,setTimeout(function(){h.chart=new n(r,{type:"pie",options:{legend:{display:!1}},data:{labels:t,datasets:[{data:e,backgroundColor:h.chartColors}]}})},100)}).fail(function(){h.results=!1,h.showResults=!0,h.searching=!1})}}}})}(window.Vue,window.jQuery,window.Chart,window.phrases);