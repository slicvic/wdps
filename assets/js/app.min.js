!function(s,t,h,n){new t({el:".js-app",data:{searching:!1,showResults:!1,validationErrors:[],shareUrl:"",minPhrases:s.minPhrases,maxPhrases:s.maxPhrases,examples:s.examples,placeholders:["Enter a phrase","Enter another phrase"],phrases:new Array(s.minPhrases).fill(""),chartLegendColors:["#ff6f6c","#999ba7"],chartColors:["#ff6f6c","#ebebee"],chart:null,results:{}},computed:{showAddPhraseBtn:function(){return this.phrases.length<this.maxPhrases},showRemovePhraseBtn:function(){return this.phrases.length>this.minPhrases}},created:function(){for(var e in s.phrases)this.phrases[e]=s.phrases[e]},mounted:function(){h(this.$el).removeClass("d-none"),h(this.$refs.shareUrlInput).focus(function(){h(this).select()}),h(this.$el).on("keypress",".js-phrase-input",function(e){13===e.which&&this.search()}.bind(this)),s.phrases.length&&this.search()},methods:{addPhrase:function(){this.phrases.length<this.maxPhrases&&this.phrases.push("")},removePhrase:function(e){this.phrases.splice(e,1)},tryAgain:function(){this.showResults=!1},copyShareUrl:function(){var e=h(this.$refs.shareUrlInput);if(e.prop("readonly",!1),navigator.userAgent.match(/ipad|iphone/i)){var s=document.createRange();s.selectNodeContents(e[0]);var t=window.getSelection();t.removeAllRanges(),t.addRange(s),e[0].setSelectionRange(0,999999)}else e.select();document.execCommand("copy"),e.prop("readonly",!0)},handlePhraseInputKeyup:function(e){this.validatePhraseInput(e)},validatePhrase:function(e){return"string"==typeof e&&e.length?e.trim().split(" ").length<2?"Phrase must be 2 or more words!":"":"Phrase cannot be blank!"},validatePhraseInput:function(e){var s=this.validatePhrase(this.phrases[e]);return t.set(this.validationErrors,e,s),!s},validateForm:function(){var e=!1;for(var s in this.phrases)this.validatePhraseInput(s)||(e=!0);return!e},search:function(){if(this.validateForm()){this.showResults=!1,this.searching=!0;var s=[];this.phrases.forEach(function(e){s.push("q[]="+e)});var a=this;h.getJSON("/api/search.php",s.join("&")).always(function(e){if("object"!=typeof e||"object"!=typeof e.results)return a.results=!1,a.searching=!1,void(a.showResults=!0);a.results=e.results,a.shareUrl=e.share_url;var s=[],t=[];a.results.forEach(function(e){t.push(e.phrase),s.push(e.percent)});var r=h(a.$refs.chartCanvas)[0];r.getContext("2d").clearRect(0,0,r.width,r.height),a.chart&&a.chart.destroy(),a.searching=!1,a.showResults=!0,window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(function(){a.chart=new n(r,{type:"pie",options:{legend:{display:!1}},data:{labels:t,datasets:[{data:s,backgroundColor:a.chartColors}]}})},100)})}}}})}(window.appConfig,window.Vue,window.jQuery,window.Chart);